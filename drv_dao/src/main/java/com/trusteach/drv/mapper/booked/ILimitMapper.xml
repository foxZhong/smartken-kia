<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.trusteach.drv.mapper.booked.ILimitMapper">

<cache flushInterval="10000" readOnly="true"></cache>

<!-- 
	private int id;
	private int IWeekNum;
	private String CCarType;
	private int IDayofweek;
	private int IKm;
	private String CSchoolCode;
	private String CSchoolName;
	private String dateKsrq;
	private String CKsccCode;
	private String CKscc;
	private String CKsddCode;
	private String CKsdd;
	private int ITotal;
	private int IUsedNum;
	private int ICheckedNum;
	private int ITptotal;
	private int ITpusedNum;
	private int ITpcheckedNum;
	private String COperator;
 -->


<sql id="table">table_yuyue_limit</sql>
<sql id="pk">id</sql>
<sql id="likeCol">c_school_name</sql>
<sql id="colums">
id,i_week_num,c_car_type,i_dayofweek,i_km,c_school_code,c_school_name,date_ksrq,c_kscc_code,
c_kscc,c_ksdd_code,c_ksdd,i_total,i_used_num,i_checked_num,i_tptotal,i_tpused_num,i_tpchecked_num,c_operator
 </sql>
<sql id="insertCols">
#{id},#{weekNum},#{carType},#{dayofweek},#{km},#{schoolCode},#{schoolName},#{dateKsrq},#{ksccCode},
#{kscc},#{ksddCode},#{ksdd},#{total},#{usedNum},#{checkedNum},#{tptotal},#{tpusedNum},#{tpcheckedNum},#{operator}
</sql>
<sql id="updateCols">
i_week_num=#{weekNum},
c_car_type=#{carType},
i_dayofweek=#{dayofweek},
i_km=#{km},
c_school_code=#{schoolCode},
c_school_name=#{schoolName},
date_ksrq=#{dateKsrq},
c_kscc_code=#{ksccCode},
c_kscc=#{kscc},
c_ksdd_code=#{ksddCode},
c_ksdd=#{ksdd},
i_total=#{total},
i_used_num=#{usedNum},
i_checked_num=#{checkedNum},
i_tptotal=#{tptotal},
i_tpused_num=#{tpusedNum}
i_tpchecked_num=#{tpcheckedNum},
c_operator=#{operator}
</sql>
<sql id="orderby">c_school_code</sql>

<resultMap type="BookedLimitModel" id="resultMap">
  <id column="id"  property="id"/>
  <result column="i_week_num" property="weekNum"/>
  <result column="c_car_type" property="carType"/>
  <result column="i_dayofweek" property="dayofweek"/>
  <result column="i_km" property="km"/>
  <result column="c_school_code" property="schoolCode"/>
  <result column="c_school_name" property="schoolName"/>
  <result column="date_ksrq" property="dateKsrq"/>
  <result column="c_kscc_code" property="ksccCode"/>
  <result column="c_kscc" property="kscc"/>
  <result column="c_ksdd_code" property="ksddCode"/>
  <result column="c_ksdd" property="ksdd"/>
  <result column="i_total" property="total"/>
  <result column="i_used_num" property="usedNum"/>
  <result column="i_checked_num" property="checkedNum"/>
  <result column="i_tptotal" property="tptotal"/>
  <result column="i_tpused_num" property="tpusedNum"/>
  <result column="i_tpchecked_num" property="tpcheckedNum"/>
  <result column="c_operator" property="operator"/>
   
</resultMap>


<select id="selectEqPk"  parameterType="int" resultType="BookedLimitModel" resultMap="resultMap">
  select <include refid="colums"/> 
    from <include refid="table"/> 
  where <include refid="pk" /> = #{pObjPk}
</select>

<select id="count" resultType="int">
  select count(*) from <include refid="table"/>
</select>

<select id="selectLikePk" parameterType="String" resultType="ArrayList" resultMap="resultMap" >
   select <include refid="colums"/> 
    from <include refid="table"/>
   where <include refid="likeCol" /> like #{pStrRegexp}
</select>


<select id="selectInPk" resultType="ArrayList" resultMap="resultMap" >
   select <include refid="colums"/> 
    from <include refid="table"/>
   where <include refid="pk" /> in
   <foreach item="pk" collection="list" open="(" separator="," close=")">
      #{pk}
   </foreach> 
</select>

<select id="selectNotInPk" resultType="ArrayList" resultMap="resultMap" >
   select <include refid="colums"/> 
    from <include refid="table"/>
   where <include refid="pk" /> not in
   <foreach item="pk" collection="list" open="(" separator="," close=")">
      #{pk}
   </foreach> 
</select>

<select  id="selectAll"  resultType="ArrayList"  resultMap="resultMap">
  select <include refid="colums"/> 
  from <include refid="table"/> 
  <include refid="orderby"/>
</select>

<select id="select" resultType="ArrayList" resultMap="resultMap">
   select <include refid="colums" />
   from <include refid="table" />
   <trim prefix="where" prefixOverrides="and">
     <if test="model.weekNum neq null">and i_week_num=#{model.weekNum} </if> 
     <if test="model.dayofweek neq null">and i_dayofweek=#{model.dayofweek}</if> 

   </trim>

</select>

<insert id="insertOne" >
   insert into <include refid="table"/> 
     ( <include refid="colums"/> ) values
     ( <include refid="insertCols"/>) 
</insert>

<update id="updateOne" flushCache="true" >
  update <include refid="table"/> set 
       <include refid="updateCols"/>
       where <include refid="pk" />=#{id}
</update>

<delete id="deleteInPk" flushCache="true">
   delete from <include refid="table"/> 
   where <include refid="pk" /> in
   <foreach item="pk" collection="list" open="(" separator="," close=")">
      #{pk}
   </foreach>
</delete>

<delete id="deleteNotInPk" flushCache="true">
   delete from <include refid="table"/> 
   where <include refid="pk" /> not in
   <foreach item="pk" collection="list" open="(" separator="," close=")">
      #{pk}
   </foreach>
</delete>





</mapper>